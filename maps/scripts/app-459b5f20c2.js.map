{"version":3,"sources":["app/newsitem/newsitem.js","app/hello.js","routes.js","scripts/app.js","index.js","templateCacheHtml.js"],"names":["newsItemController","$scope","$sce","innerHTML","trustAsHtml","itemData","rawhtml","imagelist","images","helloController","$http","tags","get","then","result","data","limitExpand","limit","news","selectedNews","performSeach","$watch","search","searchArray","split","map","s","trim","toLowerCase","i","length","relevance","computeRelevance","selected","filter","element","sort","a","b","comp","date","newsitem","forEach","searchWord","partialRelevance","item","tag","importance","toFixed","routesConfig","$stateProvider","$urlRouterProvider","$locationProvider","html5Mode","hashPrefix","otherwise","state","url","component","$inject","angular","module","directive","restrict","scope","controller","templateUrl","run","$templateCache","put","config"],"mappings":"AAcA,QAAAA,oBAAAC,EAAAC,GACAD,EAAAE,UAAAD,EAAAE,YAAAH,EAAAI,SAAAC,SACAL,EAAAM,UAAAN,EAAAI,SAAAG,OCTA,QAAAC,iBAAAR,EAAAS,GACAT,EAAAU,QACAD,EACAE,IAAA,qBACAC,KAAA,SAAAC,GACAb,EAAAU,KAAAG,EAAAC,OAEAd,EAAAe,YAAA,GACAf,EAAAgB,MAAAhB,EAAAe,WACA,IAAAE,KACAR,GACAE,IAAA,kBACAC,KAAA,SAAAC,GACAI,EAAAJ,EAAAC,KACAd,EAAAkB,aAAAC,aAAA,GAAAF,KAEAjB,EAAAoB,OAAA,aAAA,SAAAC,GACArB,EAAAkB,aAAAC,aAAAE,EAAAJ,KAIA,QAAAE,cAAAE,EAAAJ,GACA,GAAAK,KACAD,KACAC,EAAAD,EAAAE,MAAA,KAAAC,IAAA,SAAAC,GACA,MAAAA,GAAAC,OAAAC,gBAGA,KAAA,GAAAC,GAAA,EAAAA,EAAAX,EAAAY,OAAAD,IACAX,EAAAW,GAAAE,UAAAC,iBAAAT,EAAAL,EAAAW,GAGA,IAAAI,GAAAf,EAAAgB,OAAA,SAAAC,GACA,MAAAA,GAAAJ,UAAA,GAcA,OAXAE,GAAAA,EAAAG,KAAA,SAAAC,EAAAC,GACA,GAAAC,GAAAD,EAAAP,UAAAM,EAAAN,SAQA,OAPA,KAAAQ,IACAF,EAAAG,KAAAF,EAAAE,KACAD,KACAF,EAAAG,KAAAF,EAAAE,OACAD,EAAA,IAGAA,IAKA,QAAAP,kBAAAT,EAAAkB,GACA,GAAA9B,GAAA8B,EAAA9B,SACAoB,EAAA,CAYA,OAXAR,IACAA,EAAAmB,QAAA,SAAAC,GACA,GAAAC,GAAA,CACAjC,GAAA+B,QAAA,SAAAG,GACAA,EAAAC,MAAAH,IACAC,GAAAC,EAAAE,cAGAhB,GAAAa,IAGAb,EAAAiB,QAAA,GClEA,QAAAC,cAAAC,EAAAC,EAAAC,GACAA,EAAAC,WAAA,GAAAC,WAAA,KACAH,EAAAI,UAAA,KAEAL,EACAM,MAAA,OACAC,IAAA,IACAC,UAAA,QCXAT,aAAaU,SAAW,iBAAkB,qBAAsB,qBAChElD,gBAAgBkD,SAAW,SAAU,SCFrCC,QACAC,OAAA,OAAA,YAAA,iBJDAD,QACAC,OAAA,OACAC,UAAA,WAAA,WACA,OACAC,SAAA,IACAC,OACA3D,SAAA,SAEA4D,YAAA,SAAA,OAAAjE,oBACAkE,YAAA,gCCTAN,QACAC,OAAA,OACAH,UAAA,OACAQ,YAAA,iBACAD,WAAAxD,kBIJAmD,QAAAC,OAAA,OAAAM,KAAA,iBAAA,SAAAC,GAAAA,EAAAC,IAAA,iBAAA,2xCACAD,EAAAC,IAAA,6BAAA,4dHDAT,QACAC,OAAA,OACAS,OAAArB","file":"../../scripts/app-459b5f20c2.js","sourcesContent":["angular\n  .module('app')\n  .directive('newsItem', function () {\n    return {\n      restrict: 'E',\n      scope: {\n        itemData: '=data'\n      },\n      controller: ['$scope', '$sce', newsItemController],\n      templateUrl: 'app/newsitem/newsitem.html'\n    };\n  }\n);\n\nfunction newsItemController($scope, $sce) {\n  $scope.innerHTML = $sce.trustAsHtml($scope.itemData.rawhtml);\n  $scope.imagelist = $scope.itemData.images;\n}\n","angular\n  .module('app')\n  .component('app', {\n    templateUrl: 'app/hello.html',\n    controller: helloController\n  });\n\nfunction helloController($scope, $http) {\n  $scope.tags = [];\n  $http\n    .get(\"data/taglist.json\")\n    .then(function (result) {\n      $scope.tags = result.data;\n    });\n  $scope.limitExpand = 10;\n  $scope.limit = $scope.limitExpand;\n  var news = [];\n  $http\n    .get(\"data/news.json\")\n    .then(function (result) {\n      news = result.data;\n      $scope.selectedNews = performSeach('', news);\n    });\n  $scope.$watch('searchText', function (search) {\n    $scope.selectedNews = performSeach(search, news);\n  });\n}\n\nfunction performSeach(search, news) {\n  var searchArray = [];\n  if (search) {\n    searchArray = search.split(',').map(function (s) {\n      return s.trim().toLowerCase();\n    });\n  }\n  for (var i = 0; i < news.length; i++) {\n    news[i].relevance = computeRelevance(searchArray, news[i]);\n  }\n  // only news item with non 0 relevance\n  var selected = news.filter(function (element) {\n    return element.relevance > 0;\n  });\n  // sort by relevance and time\n  selected = selected.sort(function (a, b) {\n    var comp = b.relevance - a.relevance;\n    if (comp === 0) {\n      if (a.date > b.date) {\n        comp = -1;\n      } else if (a.date < b.date) {\n        comp = 1;\n      }\n    }\n    return comp;\n  });\n  return selected;\n}\n\nfunction computeRelevance(searchArray, newsitem) {\n  var tags = newsitem.tags || [];\n  var relevance = 1;\n  if (searchArray) {\n    searchArray.forEach(function (searchWord) {\n      var partialRelevance = 0;\n      tags.forEach(function (item) {\n        if (item.tag === searchWord) {\n          partialRelevance += item.importance;\n        }\n      });\n      relevance *= partialRelevance;\n    });\n  }\n  return relevance.toFixed(2);\n}\n","angular\n  .module('app')\n  .config(routesConfig);\n\n/** @ngInject */\nfunction routesConfig($stateProvider, $urlRouterProvider, $locationProvider) {\n  $locationProvider.html5Mode(true).hashPrefix('!');\n  $urlRouterProvider.otherwise('/');\n\n  $stateProvider\n    .state('app', {\n      url: '/',\n      component: 'app'\n    });\n}\n","\nroutesConfig.$inject = [\"$stateProvider\", \"$urlRouterProvider\", \"$locationProvider\"];\nhelloController.$inject = [\"$scope\", \"$http\"];angular\n  .module('app', ['ui.router', 'ui.bootstrap']);\n\nangular\n  .module('app')\n  .directive('newsItem', function () {\n    return {\n      restrict: 'E',\n      scope: {\n        itemData: '=data'\n      },\n      controller: ['$scope', '$sce', newsItemController],\n      templateUrl: 'app/newsitem/newsitem.html'\n    };\n  }\n);\n\nfunction newsItemController($scope, $sce) {\n  $scope.innerHTML = $sce.trustAsHtml($scope.itemData.rawhtml);\n  $scope.imagelist = $scope.itemData.images;\n}\n\nangular\n  .module('app')\n  .component('app', {\n    templateUrl: 'app/hello.html',\n    controller: helloController\n  });\n\nfunction helloController($scope, $http) {\n  $scope.tags = [];\n  $http\n    .get(\"data/taglist.json\")\n    .then(function (result) {\n      $scope.tags = result.data;\n    });\n  $scope.limitExpand = 10;\n  $scope.limit = $scope.limitExpand;\n  var news = [];\n  $http\n    .get(\"data/news.json\")\n    .then(function (result) {\n      news = result.data;\n      $scope.selectedNews = performSeach('', news);\n    });\n  $scope.$watch('searchText', function (search) {\n    $scope.selectedNews = performSeach(search, news);\n  });\n}\n\nfunction performSeach(search, news) {\n  var searchArray = [];\n  if (search) {\n    searchArray = search.split(',').map(function (s) {\n      return s.trim().toLowerCase();\n    });\n  }\n  for (var i = 0; i < news.length; i++) {\n    news[i].relevance = computeRelevance(searchArray, news[i]);\n  }\n  // only news item with non 0 relevance\n  var selected = news.filter(function (element) {\n    return element.relevance > 0;\n  });\n  // sort by relevance and time\n  selected = selected.sort(function (a, b) {\n    var comp = b.relevance - a.relevance;\n    if (comp === 0) {\n      if (a.date > b.date) {\n        comp = -1;\n      } else if (a.date < b.date) {\n        comp = 1;\n      }\n    }\n    return comp;\n  });\n  return selected;\n}\n\nfunction computeRelevance(searchArray, newsitem) {\n  var tags = newsitem.tags || [];\n  var relevance = 1;\n  if (searchArray) {\n    searchArray.forEach(function (searchWord) {\n      var partialRelevance = 0;\n      tags.forEach(function (item) {\n        if (item.tag === searchWord) {\n          partialRelevance += item.importance;\n        }\n      });\n      relevance *= partialRelevance;\n    });\n  }\n  return relevance.toFixed(2);\n}\n\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/hello.html\",\"<div class=\\\"container-fluid\\\">\\n    <div class=\\\"col-md-3\\\"></div>\\n    <div class=\\\"col-md-6\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"page-header\\\">\\n        <h1>Newsletter technique de Quantmetry<br><small>I\\'m reading blog posts so you don\\'t have to</small></h1>\\n        <div class=\\\"input-group input-group-lg\\\">\\n          <span class=\\\"input-group-addon\\\" id=\\\"sizing-addon1\\\">Recherche</span>\\n          <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"comma-separated words\\\" aria-describedby=\\\"sizing-addon1\\\" ng-model=\\\"searchText\\\" uib-typeahead=\\\"tag for tag in tags  | filter:$viewValue | limitTo:10\\\" typeahead-editable=\\\"true\\\">\\n        </div>\\n      </div>\\n      </div>\\n\\n        <div class=\\\"row\\\">\\n          <div ng-repeat=\\\"item in selectedNews | limitTo: limit as results\\\">\\n            <news-item data=\\\"item\\\"></news-item>\\n          </div>\\n        </div>\\n        <div class=\\\"row\\\">\\n          <button type=\\\"button\\\" class=\\\"btn btn-primary btn-block\\\" ng-hide=\\\"results.length === selectedNews.length\\\" ng-click=\\\"limit = limit + limitExpand\\\">\\n                Show {{limitExpand}} More ({{selectedNews.length - results.length}} remaining)\\n          </button>\\n        </div>\\n    </div>\\n    <div class=\\\"col-md-3\\\"></div>\\n</div>\\n\\n<div class=\\\"footer\\\">\\n  <p>Copyright (c) 2017</p>\\n</div>\\n\");\n$templateCache.put(\"app/newsitem/newsitem.html\",\"<div class=\\\"panel panel-default\\\">\\n  <div class=\\\"panel-heading\\\">\\n    <h3 class=\\\"panel-title\\\">{{itemData.title}}</h3>\\n    <p> <em>{{itemData.date}}</em>   (score: {{itemData.relevance}}) </p>\\n  </div>\\n  <div class=\\\"panel-body\\\" ng-bind-html=\\\"innerHTML\\\">\\n    <!-- {{itemData.rawhtml}} -->\\n  </div>\\n  <!-- <div class=\\\"panel-footer\\\"> -->\\n    <img src=\\\"data/images/{{imagename}}\\\" ng-repeat=\\\"imagename in imagelist\\\" class=\\\"img-responsive\\\">\\n  <!-- </div> -->\\n</div>\\n\");}]);\nangular\n  .module('app')\n  .config(routesConfig);\n\n/** @ngInject */\nfunction routesConfig($stateProvider, $urlRouterProvider, $locationProvider) {\n  $locationProvider.html5Mode(true).hashPrefix('!');\n  $urlRouterProvider.otherwise('/');\n\n  $stateProvider\n    .state('app', {\n      url: '/',\n      component: 'app'\n    });\n}\n","angular\n  .module('app', ['ui.router', 'ui.bootstrap']);\n","angular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/hello.html\",\"<div class=\\\"container-fluid\\\">\\n    <div class=\\\"col-md-3\\\"></div>\\n    <div class=\\\"col-md-6\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"page-header\\\">\\n        <h1>Newsletter technique de Quantmetry<br><small>I\\'m reading blog posts so you don\\'t have to</small></h1>\\n        <div class=\\\"input-group input-group-lg\\\">\\n          <span class=\\\"input-group-addon\\\" id=\\\"sizing-addon1\\\">Recherche</span>\\n          <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"comma-separated words\\\" aria-describedby=\\\"sizing-addon1\\\" ng-model=\\\"searchText\\\" uib-typeahead=\\\"tag for tag in tags  | filter:$viewValue | limitTo:10\\\" typeahead-editable=\\\"true\\\">\\n        </div>\\n      </div>\\n      </div>\\n\\n        <div class=\\\"row\\\">\\n          <div ng-repeat=\\\"item in selectedNews | limitTo: limit as results\\\">\\n            <news-item data=\\\"item\\\"></news-item>\\n          </div>\\n        </div>\\n        <div class=\\\"row\\\">\\n          <button type=\\\"button\\\" class=\\\"btn btn-primary btn-block\\\" ng-hide=\\\"results.length === selectedNews.length\\\" ng-click=\\\"limit = limit + limitExpand\\\">\\n                Show {{limitExpand}} More ({{selectedNews.length - results.length}} remaining)\\n          </button>\\n        </div>\\n    </div>\\n    <div class=\\\"col-md-3\\\"></div>\\n</div>\\n\\n<div class=\\\"footer\\\">\\n  <p>Copyright (c) 2017</p>\\n</div>\\n\");\n$templateCache.put(\"app/newsitem/newsitem.html\",\"<div class=\\\"panel panel-default\\\">\\n  <div class=\\\"panel-heading\\\">\\n    <h3 class=\\\"panel-title\\\">{{itemData.title}}</h3>\\n    <p> <em>{{itemData.date}}</em>   (score: {{itemData.relevance}}) </p>\\n  </div>\\n  <div class=\\\"panel-body\\\" ng-bind-html=\\\"innerHTML\\\">\\n    <!-- {{itemData.rawhtml}} -->\\n  </div>\\n  <!-- <div class=\\\"panel-footer\\\"> -->\\n    <img src=\\\"data/images/{{imagename}}\\\" ng-repeat=\\\"imagename in imagelist\\\" class=\\\"img-responsive\\\">\\n  <!-- </div> -->\\n</div>\\n\");}]);"]}